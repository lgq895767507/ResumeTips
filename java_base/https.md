## http,https网络相关

#### http概念
HTTP协议是超文本传输协议，HTTP是一个基于TCP/IP通信协议来传递数据。

#### http消息结构
* HTTP是基于客户端/服务端（C/S）的架构模型，通过一个可靠的链接来交换信息，是一个无状态的请求/响应协议。
* 客户端发送一个HTTP请求到服务器的请求消息包括以下格式：请求行（request line）、请求头部（header）、空行和请求数据四个部分组成。

![avatar](../img/http0.png)

* 默认使用端口80


#### https
* 超文本传输安全协议，HTTPS经由HTTP进行通信，但利用SSL/TLS来加密数据包。
* 默认使用端口443

#### https加密流程
1. client给出协议版本号，一个随机数，以及客户端支持的加密方法。
2. server端确认加密方法，并且给出数字证书，服务端生成一个随机数
3. client确认数字证书有效，然后生成一个新的随机数，并且使用证书中的公钥，对随机数进行加密，发给服务端
4. 服务端使用自己的私钥，获取client发来的随机数
5. client和server根据约定的加密算法，使用前面的三个随机数，生成“对话密钥”(session key)，用来加密接下来的整个对话过程。

#### session的恢复
* 握手阶段用来建立SSL连接。如果出于某种原因，对话中断，就需要重新握手。这时有两种方法可以恢复原来的session：一种叫做session ID，另一种叫做session ticket。

* session ID的思想很简单，就是每一次对话都有一个编号（session ID）。如果对话中断，下次重连的时候，只要客户端给出这个编号，且服务器有这个编号的记录，双方就可以重新使用已有的"对话密钥"，而不必重新生成一把。

* session ID是目前所有浏览器都支持的方法，但是它的缺点在于session ID往往只保留在一台服务器上。所以，如果客户端的请求发到另一台服务器，就无法恢复对话。
* session ticket就是为了解决这个问题而诞生的，目前只有Firefox和Chrome浏览器支持。
* session ticket是加密的，只有服务器才能解密，其中包括本次对话的主要信息，比如对话密钥和加密方法。当服务器收到session ticket以后，解密后就不必重新生成对话密钥了。

基于tcp的socket编程技术



#### Socket
socket是应用层与传输层的一个抽象，http是应用层，tpc/udp是传输层，socket基于TCP协议，是全双工的。
